<section>
  @for (img of imageArray; track $index) {
  <div class="card"  (click)="handlePreview(img.src)">
    <img src="{{ img.src }}" alt="images" />

    <div class="actions">
      <svg
        title="Preview Image"
        xmlns="http://www.w3.org/2000/svg"
        width="30px"
        height="30px"
        viewBox="0 0 24 24"
        class="preview-icon"
        (click)="handlePreview(img.src)"
      >
        <path
          fill="#fff"
          d="M10 22H8.75A6.76 6.76 0 0 1 2 15.25v-6.5A6.76 6.76 0 0 1 8.75 2h6.5A6.76 6.76 0 0 1 22 8.75V10a.75.75 0 1 1-1.5 0V8.75a5.26 5.26 0 0 0-5.25-5.25h-6.5A5.26 5.26 0 0 0 3.5 8.75v6.5a5.26 5.26 0 0 0 5.25 5.25H10a.75.75 0 1 1 0 1.5"
        />
        <path
          fill="#666666"
          d="M21.52 14.53a1.89 1.89 0 0 1-1.48 1.76l-3.16.52l-.09.09a.418.418 0 0 0-.09.14l-.5 2.91a1.94 1.94 0 0 1-.68 1.06a1.91 1.91 0 0 1-1.1.41h-.09a1.94 1.94 0 0 1-1.79-1.24l-2.79-7.9a1.9 1.9 0 0 1 .45-2a1.82 1.82 0 0 1 .94-.51a1.87 1.87 0 0 1 1.07.07l8 2.78a1.93 1.93 0 0 1 1.29 1.91z"
        />
      </svg>
      <a
      (click)="downloadImage(img, $event)"
        title="Download Image"
        href="{{ img.src }}"
        download
        class="download-icon"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="30px"
          height="30px"
          viewBox="0 0 24 24"
        >
          <g fill="none" fill-rule="evenodd">
            <path
              d="M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"
            />
            <path
              fill="#fff"
              d="M11.5 4a4.502 4.502 0 0 1 4.344 3.32c.104.383.421.67.811.733A4.001 4.001 0 0 1 18 15.466a1 1 0 1 0 1.002 1.73a6.002 6.002 0 0 0-1.415-10.985A6.502 6.502 0 0 0 5 8.417a5 5 0 0 0 .124 9.22a1 1 0 0 0 .75-1.854a3.001 3.001 0 0 1 .394-5.692A1.01 1.01 0 0 0 7.027 9C6.74 6.38 8.851 4 11.5 4m.5 7a1 1 0 0 1 1 1v6.584l1.293-1.292a1 1 0 0 1 1.414 1.416l-2.824 2.819c-.253.252-.5.473-.883.473c-.384 0-.63-.22-.883-.473l-2.824-2.82a1 1 0 0 1 1.414-1.415L11 18.584V12a1 1 0 0 1 1-1"
            />
          </g></svg
      ></a>
    </div>
  </div>
  }
</section>

<div *ngIf="hasMore" class="loading">
  <lottie-player
    src="https://lottie.host/3536b903-fdd6-45cb-90a1-f6001d0af4f1/RoqUSkJrBk.json"
    background="transparent"
    speed="1"
    loop
    autoplay
    style="width: 200px; height: 200px"
  >
  </lottie-player>
</div>

@if (isPreview) {
<div class="preview-image" (click)="isPreview = false">
  <div class="close-btn">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="30px"
      height="30px"
      viewBox="0 0 24 24"
      (click)="isPreview = false"
    >
      <path
        fill="#fff"
        d="M12 10.586l-4.293-4.293a1 1 0 0 0-1.414 1.414L10.586 12l-4.293 4.293a1 1 0 1 0 1.414 1.414L12 13.414l4.293 4.293a1 1 0 0 0 1.414-1.414L13.414 12l4.293-4.293a1 1 0 0 0-1.414-1.414L12 10.586z"
      />
    </svg>
  </div>
  <div class="previewed-img-holder">
    <img src="{{ currImgPreview }}" alt="preview-image" />
  </div>
</div>
}
